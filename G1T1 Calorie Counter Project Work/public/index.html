<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .header {
            background-color: #2b1d5a;
            padding: 20px 0;
            text-align: center;
        }
        body {
            background-color: rgb(68, 24, 109);
        }
        #login-form {
            color: white;
        }
        h2 {
            color: white;
        }
    </style>
</head>
<body>
<div class="container">
    <!-- Login Form -->
    <div id="login-container">
        <h2>Login</h2>
        <form id="login-form">
            <input type="email" id="login-email" placeholder="Email" required>
            <input type="password" id="login-password" placeholder="Password" required>
            <button type="submit">Login</button>
            <p>Don't have an account? <a href="#" id="show-register">Register here</a></p>
        </form>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-auth.js";

    // Fill in with your own web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyBAhYdiPIDo0OtV-RoIiRVQCxvgofMb0js",
        authDomain: "snack-quest.firebaseapp.com",
        databaseURL: "https://snack-quest-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "snack-quest",
        storageBucket: "snack-quest.appspot.com",
        messagingSenderId: "974726219698",
        appId: "1:974726219698:web:361c5bf4bf98a8798c86ab",
        measurementId: "G-YXRNC4ZPTZ"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const loginContainer = document.getElementById('login-container');
    const registerContainer = document.getElementById('register-container');
    const appContainer = document.getElementById('app-container');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const showLogin = document.getElementById('show-login');
    const showRegister = document.getElementById('show-register');
    const logoutButton = document.getElementById('logout-button');

    showRegister.addEventListener('click', () => {
        window.location.href = "registration.html";
    });



    loginForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        try {
            await signInWithEmailAndPassword(auth, email, password);
        } catch (error) {
            alert(error.message);
        }
    });

    onAuthStateChanged(auth, (user) => {
        if (user) {
            window.location.href = "3DVersion.html"; 
        }
    });
</script>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>